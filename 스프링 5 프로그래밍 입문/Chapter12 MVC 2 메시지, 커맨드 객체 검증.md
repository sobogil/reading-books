## 📝 목차
- [Chapter12](#Chapter12)

##Chapter12 MVC 2: 메시지, 커맨드 객체 검증

2. <spring:message> 태그 사용하기

문자열을 별도의 파일로 저장하고 jsp코드에서 메시지 값을 가져올 때 사용한다.
MessageSource빈을 설정하고 jsp에서 스피링메시지 태그를 사용해 메시지를 가져온다.

<label>이메일</label>이런식으로 저장해두면 나중에 나라마다 언어가 다르거나 해당 메시지를 바꾸고 싶을 때 모든 파일을 전부다 고쳐야하므로 스프링 메시지 태그를 사용한다.

프로퍼티에 저장해서 사용하는 방식
예)
name=이름
email=이메일
password=비밀번호
password.confirm=비밀번호 확인

2.1 messagesource와 스프링 메시지 태그

스프링은 메시지를 관리할 수 있는 MessageSource인터페이스를 정의하고 있다.
getMessage()를 통해 필요한 메시지를 가져와서 사용하는 식이다.


3. 커맨드 객체의 값 검증과 에러 메시지 처리

가입에 실패한 이유를 알려줘야 하고 올바르지 않은 값을 입력했을 때 동작하지 않도록 해줘야 한다. 즉 폼 검증과 에러 메시지 처리는 아주 중요한 문제이다. 

스프링은 이 두문제를 다음과 같은 방법을 제시한다.
-커맨드 객체를 검증하고 결과를 에러코드로 저장
-jsp에서 에러 코드로부터 메시지를 출력

3.1 커맨드 객체 검증과 에러 코드 지정

객체를 검증할 때는 Validator인터페이스를 사용한다. supports()메서드는 검증할수 있는 타입인지 확인하고 validate()메서드가 첫 번째 파라미터로 받은 객체를 검증하고 오류 결과를 Errors에 담는다.

ValidationUtils.rejectIfEmptyOrWhitespace()메서드는 target을 파라미터로 받지 않아도 target 객체의 특정 프로퍼티에 접근할 수 있는데 이 이유로는 스프링 MVC에서 Validator를 사용하는 코드는 요청 매핑 애노테이션을 적용하는 메서드에서 Errors타입의 파라미터를 전달받으므로 Errors객채에 있는 getFieldValue() 메서드를 통해 특정 프로퍼티의 값을 구할 수 있다.

특정 프로퍼티에 에러가 생기면 rejectValue()사용 커맨드 객체가 문제가 생기면(로그인 폼에서 아이디 비밀번호가 둘다 에러가 생겼을 때)는 reject()로 에러를 추가한다.
